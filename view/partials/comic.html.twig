{% extends 'layout.html.twig' %}

{% block title %}{{parent()}} / Comics / {{comic.title}} {% endblock %}

 {% block opengraph_meta %}
  		{{parent()}}
		<meta property="og:title" content="RishiSatsangi.com / Comics / {{comic.title}}">
		<meta property="og:description" content="{{comic.title}}">
		<meta property="og:image" content="{{data.image_url}}">
  {% endblock %} 

{% block body %}
	{{ parent() }}
	<!-- <ol class="breadcrumb">
	  <li>Art</li>
	  <li class="active"><a href="/galleries/{{data.gallery_id}}">{{data.gallery_name}}</a></li>
	</ol> -->
    <h2>{{comic.title}}</h2>

    {% if data.type=='image' %}
    	<!-- <pre>{{comic|print_r}}</pre> -->
    	<div class="viewer">
			<img src="{{data.image_url}}" class="hidden" />
		</div>
	{% endif %}

    {% if data.type=='youtube' %}
		<img src="{{data.image_url|resizeImage(180,180)}}" class="img-rounded acb-youtube-thumb" data-youtube-link="{{data.youtube_link}}" data-title="{{data.name}}" >
	{% endif %}

	<div class="clearfix"></div>
	<br />
	<div class="row">
	  <div class="col-md-3 pull-left left  site-thumbnail">
	  	{% if data.prev %}
	  		<a href="/contents/{{data.prev.id}}" title="{{data.prev.name}}" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-arrow-left"></span> prev</a>
	  		<br />
	  		<a href="/contents/{{data.prev.id}}" title="{{data.prev.name}}"><img src="{{data.prev.image_url|resizeImage(90,90)}}" class="img-rounded" ></a>
	  	{% endif %}
	  </div>
	  <div class="col-md-3 pull-right right  site-thumbnail">
	  	{% if data.next %}
	  		<a href="/contents/{{data.next.id}}" title="{{data.next.name}}" class="btn btn-default btn-xs"> next <span class="glyphicon glyphicon-arrow-right"></span></a>
	  		<br />
	  		<a href="/contents/{{data.next.id}}" title="{{data.next.name}}"><img src="{{data.next.image_url|resizeImage(90,90)}}" class="img-rounded" ></a>
	  	{% endif %}
	  </div>
	</div>

	<div class="well well-sm">
		<div class="fb-like" data-href="{{siteUrl('/contents/')}}{{data.id}}" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
		<a href="//www.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark" ><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a>
		<div class="g-plusone" data-annotation="inline" data-width="150"></div>
		<a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-via="dethbird">Tweet</a>
	</div>

	<div class="fb-comments" data-href="{{siteUrl('/contents/')}}{{data.id}}" data-numposts="10" data-colorscheme="light" ></div>

	<script>
		$(document).ready(function(){
			
			// buildup comic viewer
			var comic = JSON.parse('{{comic|json_encode|raw}}');
			var frame_index = comic.viewerFrames.length-1;
			// console.log(comic.viewerFrames[frame_index]);
			// console.log("here");

			var nextFrame = function() {
				frame_index++;	
				if (frame_index == comic.viewerFrames.length) {
					frame_index = 0;
				}

				$('.viewer').animate(
					{
						'width' : comic.viewerFrames[frame_index][0]
					}, 
					1600,
					"easeOutElastic"
				);

				// $('.viewer img').css('margin-left', comic.viewerFrames[frame_index][1] + "px");
				
				console.log(frame_index);

				$('.viewer img').animate(
					{
						'margin-left' : comic.viewerFrames[frame_index][1]
					}, 
					400,
					"easeInOutCirc"
				);

			};

			console.log($('.viewer'));

			$('.viewer').css('overflow', 'hidden');
			$('.viewer').css('width', '0px');
			$('.viewer').css('cursor', 'pointer');
			$('.viewer img').removeClass('hidden');

			nextFrame();
			$('.viewer').click(nextFrame);

		});
	</script>

{% endblock %}

